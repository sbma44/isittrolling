<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=9,chrome=1">
    <title>canvas LEDs -- Pxxl.js</title>
    <link rel="stylesheet" href="../demo.css">
  
    
    <link rel="stylesheet" href="../dark1.css">
    
    
    <link rel="stylesheet" href="demo.css">

    <link rel="stylesheet" href="../highlight.css">
    
    
    <link rel="stylesheet" href="../monokai.css">
    
  
  </head>
  <body>
    <div id="demo" class="demo"></div>
  <!-- <canvas class="demo" width="900" height="80"></canvas> -->

  <div class="ribbon header">
    <span class="title">canvas LEDs</span>
    <span class="right">
<!--        <a href="https://twitter.com/share" class="twitter-share-button" data-via="remcoder" data-dnt="true">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<div class="g-plusone"></div>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
 -->
    </span>
  </div>

  <div class="ribbon footer">
    &copy; 2012 <a href="http://twitter.com/remcoder">@remcoder</a>
    

    <span class="right">see the <a href="https://github.com/remcoder/Pxxl.js">Pxxl.js Github repo</a> for tha codez</span>
  </div>


  <pre class="code">
    <code class="javascript">
function rgba(r,g,b,a) {
  return &#34;rgba(&#34;+ ~~r +&#34;,&#34;+ ~~g +&#34;,&#34;+ ~~b +&#34;,&#34; + a +&#34;)&#34;;
}

function led(px,py,alpha) {
  ctx.fillStyle = rgba(255,0,0,alpha);
  var x = dx + px * size;
  if (x &lt; 0) x+= width;
  var y = dy + py * size;
  ctx.beginPath();
  ctx.arc(x*1.2, y*1.4, size/2, 0, Math.PI*2, true);
  ctx.closePath();
  ctx.fill();
}

var text = &#34;leds are cool&#34;;
var canvas = document.createElement(&#34;canvas&#34;);
$(&#34;#demo&#34;).append(canvas);
var ctx = canvas.getContext(&#39;2d&#39;);
var size = 30;
var width = ~~(text.length * 8 * size * 1.2);
var dx = innerWidth;
var dy = -40 +(innerHeight - size*8*1.4) /2;

pxxl(&#34;../../fonts/c64.bdf&#34;, text , function (pixels) {
    pixels = pixels.sort(function(p1,p2){ return p2.x-p1.x; });
    console.log(&#34;font loaded&#34;);
    canvas.width = innerWidth;
    canvas.height = innerHeight; //;
    ctx.fillStyle = &#34;red&#34;;
    

    setInterval(function() {
      //ctx.fillStyle = &#34;rgba(0,0,0,0.7)&#34;;
      ctx.clearRect(0,0,canvas.width, canvas.height);

      ctx.fillStyle = &#34;red&#34;;
      for (var i=0 ; i&lt;pixels.length ; i++)
      {
        //console.log(&#34;pixel&#34;,p);
        var p = pixels[i];

        led(p.x,p.y,0.8);
        led(p.x+1,p.y,0.3); // afterglow 1
        led(p.x+2,p.y,0.1); // afterglow 1
      }
      dx-=size;
      if (dx &lt; -width) dx = 0;
    }, 100);
});
    </code>
  </pre>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
  </script>
  <script src="../modernizr.js"></script>
  <script src="../pxxl-0.4.0.js" type="text/javascript"></script>
    
    <script type="text/javascript" id="code">
      function rgba(r,g,b,a) {
  return "rgba("+ ~~r +","+ ~~g +","+ ~~b +"," + a +")";
}

function led(px,py,alpha) {
  ctx.fillStyle = rgba(255,0,0,alpha);
  var x = dx + px * size;
  if (x < 0) x+= width;
  var y = dy + py * size;
  ctx.beginPath();
  ctx.arc(x*1.2, y*1.4, size/2, 0, Math.PI*2, true);
  ctx.closePath();
  ctx.fill();
}

var text = "leds are cool";
var canvas = document.createElement("canvas");
$("#demo").append(canvas);
var ctx = canvas.getContext('2d');
var size = 30;
var width = ~~(text.length * 8 * size * 1.2);
var dx = innerWidth;
var dy = -40 +(innerHeight - size*8*1.4) /2;

pxxl("../../fonts/c64.bdf", text , function (pixels) {
    pixels = pixels.sort(function(p1,p2){ return p2.x-p1.x; });
    console.log("font loaded");
    canvas.width = innerWidth;
    canvas.height = innerHeight; //;
    ctx.fillStyle = "red";
    

    setInterval(function() {
      //ctx.fillStyle = "rgba(0,0,0,0.7)";
      ctx.clearRect(0,0,canvas.width, canvas.height);

      ctx.fillStyle = "red";
      for (var i=0 ; i<pixels.length ; i++)
      {
        //console.log("pixel",p);
        var p = pixels[i];

        led(p.x,p.y,0.8);
        led(p.x+1,p.y,0.3); // afterglow 1
        led(p.x+2,p.y,0.1); // afterglow 1
      }
      dx-=size;
      if (dx < -width) dx = 0;
    }, 100);
});
    </script>
    
    <script src='../highlight.pack.js'></script>
    <script>
      // $("code").text($("#code").text());
      hljs.tabReplace = '  ';
      hljs.initHighlightingOnLoad();
    </script>
    <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24377032-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>